<!DOCTYPE html>
<html>

<head>
    <title>Movie and Weather Information</title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <header>
        <h1>Movie and Weather Information</h1>
        <nav class="navbar bg-light" role="navigation">
            <div class="container">
                <a class="navbar-brand" href="#">City Explorer</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-nav"
                    aria-controls="navbar-nav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbar-nav">
                    <form class="d-flex mx-auto" id="search-form">
                        <input type="text" placeholder="Enter a city" class="mr-2 search-input" id="search-input" />
                        <button type="submit" class="explore-btn btn btn-outline-primary">Explore</button>
                    </form>
                </div>
            </div>
        </nav>
    </header>
    <section class="container">
        <div class="row">



            <div class="city-details">
                <div class="card row stack left">
                    <h2>Location Information</h2>
                    <div class="location-info"></div>
                </div>

                <div class="card row stack left">
                    <h2>Movie Information</h2>
                    <div class="movie-info"></div>
                </div>
                <div class="card row stack left">
                    <h2>Weather Information</h2>
                    <div class="weather-info"></div>
                </div>
            </div>


            <div class="" id="city-container">

                <script>
                    document.querySelector('#search-form').addEventListener('submit', event => {
                        event.preventDefault();
                        const searchValue = document.querySelector('#search-input').value;

                        fetch(`/location?searchQuery=${searchValue}`)
                            .then(response => response.json())
                            .then(data => {
                                const cityContainer = document.querySelector('#city-container');
                                cityContainer.innerHTML = '';

                                data.forEach(location => {
                                    const locationDiv = document.createElement('div');
                                    locationDiv.classList.add('city-details');
                                    locationDiv.innerHTML = `
                                        <div class="card row stack right">
                                            <h2>${location.name}</h2>
                                            <img src="${location.image}" alt="${location.name}">
                                            <p>Latitude: ${location.lat}</p>
                                            <p>Longitude: ${location.lon}</p>
                                        </div class="card row stack">
                                        `;
                                    cityContainer.appendChild(locationDiv);
                                });
                            })
                            .catch(error => console.error(error));
                    });
                </script>
            </div>
        </div class="row">
    </section>

    <script src="http://localhost:3000"></script>
</body>

</html>